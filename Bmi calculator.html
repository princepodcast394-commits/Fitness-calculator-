<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BMI Calculator — FitCalc</title>
  <style>
    :root{
      --bg:#f7fbfc; --card:#ffffff; --accent:#0b7d6b; --muted:#6b7280;
      --radius:12px; --shadow: 0 6px 18px rgba(12,34,56,0.08);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{height:100%;margin:0;background:var(--bg);color:#0f172a}
    .wrap{max-width:820px;margin:28px auto;padding:20px}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:20px}
    h1{margin:0 0 8px;font-size:1.4rem}
    p.lead{margin:0 0 16px;color:var(--muted)}
    .grid{display:grid;gap:12px}
    @media(min-width:720px){ .grid-2{grid-template-columns:1fr 1fr} }
    label{display:block;font-size:.85rem;margin-bottom:6px;color:#111827}
    input[type="number"], select {
      width:100%;padding:10px;border-radius:8px;border:1px solid #e6e9ef;font-size:1rem;
      box-sizing:border-box;
    }
    .inline{display:flex;gap:8px;align-items:center}
    .btn{background:var(--accent);color:white;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:600}
    .btn.secondary{background:#eef3f2;color:var(--accent);border:1px solid #d7e9e3}
    .result{margin-top:14px;padding:12px;border-radius:10px;background:#f1fdfb;border:1px solid #dff5ec}
    .muted{color:var(--muted);font-size:.9rem}
    .small{font-size:.85rem;color:var(--muted)}
    .controls{display:flex;gap:10px;flex-wrap:wrap}
    .badge{display:inline-block;padding:6px 10px;border-radius:999px;background:#eef6f3;color:var(--accent);font-weight:600}
    .formula{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;background:#f8fafb;padding:8px;border-radius:8px;border:1px dashed #e2e8f0;margin-top:8px}
    .footer{margin-top:18px;text-align:center;color:var(--muted);font-size:.85rem}
    .error{color:#b91c1c;font-weight:600}
  </style>
</head>
<body>
  <main class="wrap card" role="main" aria-labelledby="title">
    <header>
      <h1 id="title">BMI Calculator</h1>
      <p class="lead">Apna weight aur height daalein — BMI jaldi se calculate karein. (Not medical advice)</p>
    </header>

    <section aria-label="calculator" class="grid">
      <!-- Units -->
      <div class="card" style="padding:14px;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
          <strong>Units</strong>
          <div class="inline" role="radiogroup" aria-label="weight units">
            <label style="margin:0"><input type="radio" name="weightUnit" value="kg" checked> kg</label>
            <label style="margin:0"><input type="radio" name="weightUnit" value="lb"> lb</label>
          </div>
        </div>

        <div style="margin-bottom:12px">
          <label for="weight">Weight</label>
          <input id="weight" type="number" min="0" step="any" inputmode="decimal" aria-describedby="weightHelp" placeholder="e.g. 70">
          <div id="weightHelp" class="small muted">Enter weight in selected unit.</div>
        </div>

        <div style="margin-bottom:8px">
          <label>Height units</label>
          <div class="inline" role="radiogroup" aria-label="height units">
            <label style="margin:0"><input type="radio" name="heightUnit" value="cm" checked> cm</label>
            <label style="margin:0"><input type="radio" name="heightUnit" value="ftin"> ft + in</label>
          </div>
        </div>

        <div id="heightCmRow" style="margin-bottom:12px">
          <label for="heightCm">Height (cm)</label>
          <input id="heightCm" type="number" min="0" step="any" inputmode="decimal" placeholder="e.g. 170">
        </div>

        <div id="heightFtInRow" style="display:none;margin-bottom:12px">
          <label>Height (ft / in)</label>
          <div style="display:flex;gap:8px">
            <input id="heightFt" type="number" min="0" step="1" placeholder="ft" inputmode="numeric">
            <input id="heightIn" type="number" min="0" step="any" placeholder="in" inputmode="decimal">
          </div>
        </div>

        <div class="controls" style="margin-top:6px">
          <button id="calcBtn" class="btn" aria-live="polite">Calculate BMI</button>
          <button id="resetBtn" class="btn secondary" type="button">Reset</button>
          <button id="copyBtn" class="btn secondary" type="button">Copy Result</button>
        </div>

        <div id="error" class="small error" role="status" aria-live="assertive" style="display:none;margin-top:10px"></div>

        <div id="output" class="result" style="display:none" aria-live="polite" aria-atomic="true">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div><strong id="bmiValue">BMI: —</strong></div>
              <div class="muted small" id="bmiCategory">Category: —</div>
            </div>
            <div>
              <div class="badge" id="badgeCategory">—</div>
            </div>
          </div>
          <div class="formula" id="formulaText">Formula: BMI = weight(kg) / height(m)^2</div>
          <div class="small" id="explain">Explanation: —</div>
        </div>
      </div>

      <!-- Info / Tips -->
      <aside class="card" style="padding:14px;">
        <h2 style="font-size:1rem;margin-bottom:8px">Quick Tips</h2>
        <ul class="small muted">
          <li>Accuracy depends on correct weight & height inputs.</li>
          <li>BMI is a screening tool — not a diagnostic measure.</li>
          <li>For more precise body composition use body fat measurements.</li>
        </ul>

        <h3 style="margin-top:12px;font-size:.95rem">Categories</h3>
        <table class="small" style="width:100%;margin-top:6px;border-collapse:collapse">
          <tr><td><strong>&lt; 18.5</strong></td><td class="muted">Underweight</td></tr>
          <tr><td><strong>18.5–24.9</strong></td><td class="muted">Normal</td></tr>
          <tr><td><strong>25–29.9</strong></td><td class="muted">Overweight</td></tr>
          <tr><td><strong>≥ 30</strong></td><td class="muted">Obese</td></tr>
        </table>
      </aside>
    </section>

    <div class="footer">
      <p class="small muted">Formula shown is: BMI = weight(kg) ÷ (height(m))² · Not medical advice.</p>
    </div>
  </main>

  <script>
    // Utilities & constants
    const LB_TO_KG = 0.45359237;
    const IN_TO_CM = 2.54;
    // Elements
    const weightEl = document.getElementById('weight');
    const heightCmEl = document.getElementById('heightCm');
    const heightFtEl = document.getElementById('heightFt');
    const heightInEl = document.getElementById('heightIn');
    const calcBtn = document.getElementById('calcBtn');
    const resetBtn = document.getElementById('resetBtn');
    const copyBtn = document.getElementById('copyBtn');
    const output = document.getElementById('output');
    const bmiValueEl = document.getElementById('bmiValue');
    const bmiCategoryEl = document.getElementById('bmiCategory');
    const badgeCategoryEl = document.getElementById('badgeCategory');
    const formulaText = document.getElementById('formulaText');
    const explain = document.getElementById('explain');
    const errorEl = document.getElementById('error');
    const heightCmRow = document.getElementById('heightCmRow');
    const heightFtInRow = document.getElementById('heightFtInRow');

    // Unit radios
    const weightRadios = document.getElementsByName('weightUnit');
    const heightRadios = document.getElementsByName('heightUnit');

    // Show/hide height inputs based on unit
    function updateHeightInputs(){
      const selected = Array.from(heightRadios).find(r=>r.checked).value;
      if(selected === 'cm'){
        heightCmRow.style.display = '';
        heightFtInRow.style.display = 'none';
      } else {
        heightCmRow.style.display = 'none';
        heightFtInRow.style.display = '';
      }
    }
    Array.from(heightRadios).forEach(r=>r.addEventListener('change', updateHeightInputs));
    updateHeightInputs();

    function getSelectedWeightUnit(){ return Array.from(weightRadios).find(r=>r.checked).value; }
    function getSelectedHeightUnit(){ return Array.from(heightRadios).find(r=>r.checked).value; }

    function showError(msg){
      errorEl.style.display = 'block';
      errorEl.textContent = msg;
    }
    function clearError(){ errorEl.style.display='none'; errorEl.textContent=''; }

    function classifyBMI(bmi){
      if(bmi < 18.5) return {cat:'Underweight', badge:'Underweight', color:'#f59e0b'};
      if(bmi < 25) return {cat:'Normal', badge:'Healthy', color:'#10b981'};
      if(bmi < 30) return {cat:'Overweight', badge:'Overweight', color:'#f97316'};
      return {cat:'Obese', badge:'Obese', color:'#ef4444'};
    }

    function calcBMI(){
      clearError();
      output.style.display = 'none';

      // Read weight
      const weightRaw = parseFloat(weightEl.value);
      if(!isFinite(weightRaw) || weightRaw <= 0){ showError('Please enter a valid weight greater than 0.'); return; }

      // Convert weight to kg if needed
      const wUnit = getSelectedWeightUnit();
      const weightKg = (wUnit === 'lb') ? (weightRaw * LB_TO_KG) : weightRaw;

      // Read height
      const hUnit = getSelectedHeightUnit();
      let heightCm;
      if(hUnit === 'cm'){
        const hcm = parseFloat(heightCmEl.value);
        if(!isFinite(hcm) || hcm <= 0){ showError('Please enter a valid height in cm greater than 0.'); return; }
        heightCm = hcm;
      } else {
        const ft = parseFloat(heightFtEl.value) || 0;
        const inch = parseFloat(heightInEl.value) || 0;
        if(ft < 0 || inch < 0){ showError('Feet and inches must be non-negative.'); return; }
        // require at least one positive value
        if(ft === 0 && inch === 0){ showError('Please enter height in feet & inches.'); return; }
        const totalIn = (ft * 12) + inch;
        heightCm = totalIn * IN_TO_CM;
      }

      // convert to meters
      const heightM = heightCm / 100;
      if(heightM <= 0){ showError('Height must be greater than 0.'); return; }

      // Calculate BMI precisely
      const bmi = weightKg / (heightM * heightM);
      // safety: avoid NaN and Infinity
      if(!isFinite(bmi) || isNaN(bmi)){ showError('Calculation error — check inputs.'); return; }

      const bmiRounded = Math.round(bmi * 10) / 10; // one decimal
      const classification = classifyBMI(bmiRounded);

      // Display results
      bmiValueEl.textContent = `BMI: ${bmiRounded.toFixed(1)}`;
      bmiCategoryEl.textContent = `Category: ${classification.cat}`;
      badgeCategoryEl.textContent = classification.badge;
      badgeCategoryEl.style.background = classification.color + '22';
      badgeCategoryEl.style.color = classification.color;

      formulaText.textContent = `Formula: BMI = weight(kg) ÷ height(m)^2  →  ${weightKg.toFixed(1)} ÷ ${heightM.toFixed(2)}²`;
      explain.innerHTML = `Aapka BMI ${bmiRounded.toFixed(1)} hai. Yeh ek screening tool hai — <strong>${classification.cat}</strong>. BMI se body composition ka exact pata nahi chalta; agar aap muscular ho to BMI high aayega lekin health risk alag ho sakta hai.`;

      output.style.display = '';
      // focus for screen readers
      output.focus?.();
    }

    calcBtn.addEventListener('click', calcBMI);

    // Reset
    resetBtn.addEventListener('click', function(){
      weightEl.value = '';
      heightCmEl.value = '';
      heightFtEl.value = '';
      heightInEl.value = '';
      clearError();
      output.style.display = 'none';
      // reset units default
      document.querySelector('input[name="weightUnit"][value="kg"]').checked = true;
      document.querySelector('input[name="heightUnit"][value="cm"]').checked = true;
      updateHeightInputs();
    });

    // Copy result to clipboard
    copyBtn.addEventListener('click', async function(){
      if(output.style.display === 'none'){
        showError('No result to copy. Please calculate first.');
        return;
      }
      clearError();
      const text = `${bmiValueEl.textContent} — ${bmiCategoryEl.textContent.replace('Category: ','')}\n${formulaText.textContent}`;
      try{
        await navigator.clipboard.writeText(text);
        // small UX cue
        const orig = copyBtn.textContent;
        copyBtn.textContent = 'Copied!';
        setTimeout(()=> copyBtn.textContent = orig, 1500);
      }catch(err){
        showError('Clipboard not available — select and copy manually.');
      }
    });

    // Enter key triggers calculate
    document.addEventListener('keydown', function(e){
      if(e.key === 'Enter'){
        // don't submit any form — just calculate
        calcBMI();
      }
    });

    // Basic input validation to remove error on change
    [weightEl,heightCmEl,heightFtEl,heightInEl].forEach(el=>{
      el.addEventListener('input', ()=> clearError());
    });

    // Make output container focusable for screen readers
    output.setAttribute('tabindex','-1');
  </script>
</body>
  </html>
